@{
    Layout = "~/views/shared/_layout.cshtml";
}
@model BaWuClub.Web.Dal.ViewArticle

<div class="container">
    <div class="container-left fleft">
        <div class="question-show">
            <div class="article-title">
                <h2>@Model.Title</h2>
                <p class="article-title-info">
                     @(((DateTime)Model.VarDate).ToString("yyyy年MM月dd日")) <a href="/member/u-@Model.UId/show">@Model.NickName</a>
                </p>
                <p class="article-title-tags">
                     标签:@{
                         if (!string.IsNullOrEmpty(Model.Tags) && Model.TagIds != null)
                         {
                             var tags = Model.Tags.Split(',');
                             var tagIds = Model.TagIds.Split(',');
                             for (int i = 0; i < tags.Length; i++) { 
                                <a href="/column/tags/@tagIds[i]">@tags[i]</a>
                             }
                         }
                     }
                    分享:@Html.Partial("~/views/shared/_partialshare.cshtml")
                </p>
            </div>
            <div class="article-desc">
                @Html.Raw(Model.Context)
            </div>
            <div class="article-share">分享:@Html.Partial("~/views/shared/_partialshare.cshtml")</div>
        </div>
        <div class="comment-wrap">
            <div class="comment-title">
                <span class="fleft"><strong>@ViewBag.ReviewsCount 个评论</strong></span>
            </div>
            <div class="comment-list">
                @{
                    var reviews = ViewBag.Reviews as IEnumerable<BaWuClub.Web.Dal.ViewArticleReview>;
                    if (reviews != null){
                        foreach (var review in reviews)
                        {
                            var avatar = string.IsNullOrEmpty(review.Cover) ? "/content/images/no-img.jpg" : "/uploads/avatar/small/" + @review.Cover;
                            <div class="comment-item">
                                <div class="comment-item-info">
                                    <a href="/member/u-@review.UserId/show/" class="comment-item-info-name">@review.NickName</a>
                                    <a href="/member/u-@review.UserId/show/" class="comment-item-info-avatar">
                                        <img title="@review.NickName" src="@avatar" />
                                    </a>
                                </div>
                                <div class="comment-item-content">
                                    @Html.Raw(review.ReviewText)
                                </div>
                                <div class="comment-item-meta">
                                    <span>评论与 @BaWuClub.Web.Common.HtmlCommon.GetAnswerTimeSpan(review.PutDate)</span>
                                </div>
                            </div>
                        }
                    }
                }
            </div>
            <div class="comment-editor">
               <input type="text" id="editor" name="comment" />
                 <!--<div id="editor"></div>-->
                <div class="btns-wrap">
                    <input type="button" class="btn-sub" value="立即评论" onclick="return recomments(@Model.Id,'/column/reviews');" />
                </div>
            </div>
        </div>
    </div>
    <div class="container-right fright">
        <div class="module">
            <div class="question-user">
                @{
                    var cover = (string.IsNullOrEmpty(Model.UserCover) ? "/content/images/no-img.jpg" : "/uploads/avatar/small/" + Model.UserCover);
                    <img src="@cover" alt="" />
                }
                <div class="question-user-info">
                    <a href="/member/u-@Model.UserId/show">@Model.NickName</a>
                    <p class="user-intro">@Model.Intro</p>
                </div>
            </div>
        </div>

        <div class="user-related module">
            <div class="module-title">
                <span>@Html.Raw(Model.NickName)的其他文章</span>
            </div>
            <div class="module-list">
                <ul>
                    @{
                        var otherArticles=ViewBag.otherArticles ;
                        if (otherArticles != null) {
                            foreach (var article in otherArticles as IEnumerable<BaWuClub.Web.Dal.Article>) { 
                                    <li><a href="/column/show/@article.Id">@article.Title</a></li>
                            }
                        }
                    }
                </ul>
            </div>
        </div>

    </div>
</div>
<script type="text/javascript" src="~/content/scripts/jquery.js"></script>
<script type="text/javascript" src="~/content/ckeditor-base/ckeditor.js"></script>
<script type="text/javascript">
    var editor = CKEDITOR.replace('editor');
</script>
<!--    
<script type="text/javascript" src="~/content/froala-editor/js/froala_editor.min.js"></script>
<script>
    $(function () {
        $('#editor').froalaEditor({
            toolbarButtons: ['bold', 'italic', 'underline', 'strikeThrough', 'color', '|', 'paragraphFormat', 'align', 'undo', 'redo', 'html'],
            language: 'zh'
        })
    });
</script>-->
<script type="text/javascript" src="~/content/scripts/comments.js"></script>